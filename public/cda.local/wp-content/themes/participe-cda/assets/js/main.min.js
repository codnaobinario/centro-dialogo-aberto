"use strict";function resize(){var a=$(window).height()-$(".navbar").height();$(".home_grid").height(a)}jQuery(function(){if($("input, textarea").placeholder(),$(".form-group.edit button").bind("click",function(){var a=$(this).siblings("input:text,input:password");console.log(a),a.attr("disabled",!a.attr("disabled"))}),$(".steps.voting").length){var a={total:12,current:1,votes:new Array(this.total),pts:{happy:3,neutral:2,unhappy:1,next:"x"},init:function(){$(".steps .footer .next, .emot a").bind("click",a.vote),$(".steps .footer .finish").bind("click",a.finish),$(".steps .footer .prev").bind("click",a.prev),a.load()},vote:function(){a.votes[a.current-1]=a.pts[this.className],a.next()},load:function(b){b=b||a.current;var c=$(".steps_content .step"+b).html();$(".step_content").html(c),$(".steps .footer .counter").text(a.current+"/"+a.total)},next:function(){a.current===a.total?($(".steps .footer .next").hide(),$(".steps .footer .finish").show()):a.current++,$(".steps .footer .prev").show(),a.load()},prev:function(){a.current--,$(".steps .footer .next").show(),$(".steps .footer .finish").hide(),1===a.current&&$(".steps .footer .prev").hide(),a.load()},finish:function(){window.location.href="../resultados?voting="+a.votes.join(",")}};a.init()}if($(".home_grid").length&&($(window).resize(resize),resize()),jQuery(document).ready(function(){jQuery(".carousel").carousel({interval:1500})}),$(".proposta").length){{var b=$(".content-header .tabs .tab a");100/b.length-10}$(".carousel").carousel({interval:3e3}),$("#gallery2 .control").bind("click",function(){var a=$("#gallery2");a.hasClass("paused")?a.carousel("cycle").removeClass("paused"):a.carousel("pause").addClass("paused")}),$("#gallery2 .play span").bind("click",function(){});var c={open:function(){$(".user_comment").slideDown("fast"),$(".vote .quotes").addClass("selected"),$(".user_comment input:text").focus()},close:function(){$(".user_comment").slideUp("fast"),$(".vote .quotes").removeClass("selected")},toggle:function(){$(".vote .quotes").hasClass("selected")?c.close():c.open()}};$(".vote .quotes").bind("click",c.toggle);var d=function(){var a=this.id,b=$(this).parent().hasClass("selected")?"dislike":"like",d=$(this).data("url"),e=$(this).parent().siblings(".up,.down"),f=$(this).children("p");$(this).parent().toggleClass("selected"),f.text("like"===b?parseInt(f.text())+1:parseInt(f.text())-1),$.post(d+"/"+a+"/"+b),e.hasClass("selected")&&(f=e.find("p"),f.text(parseInt(f.text())-1),e.removeClass("selected"),a="up"===a?"down":"up",$.post(d+"/"+a+"/dislike")),c.open()};$("#up,#down",".vote").bind("click",d),$("form#comment").bind("submit",function(){var a=$(this),b=a.attr("action"),d=a.children("input:text");return $.ajax({type:"POST",url:b,data:{comment:d.val()},success:function(a){$(".no_comments").hide(),$(".comments .comments_wrapper").prepend('<div style="display: none;" class="comment user_hold"> <p class="comment_hold">Comentário aguardando aprovação</p> <p class="comment_author">'+a.comment_author+'</p> <p class="comment_time">Agora</p>  <p class="comment_title">'+a.comment_content+"</p></div>").children("div:first").fadeIn("slow"),c.close(),d.val("")},dataType:"json"}),!1})}if($(".edit_points").length){var e,f,g,h,i,j,k={init:function(){e=$(".map_zone"),h=e.data("points"),f=$("img",e),i=parseInt($(".map_zone").position().top),j=parseInt($(".map_zone").position().left),g=$(".map_zone .point"),k.load(),e.bind("click",k.mapClick)},load:function(){var a=h.split("l");a.shift(),$(a).each(function(a,b){k.plot(b.split("x"))})},mapClick:function(a){"map"===a.target.id?k.includePoint(a):k.removePoint(a)},includePoint:function(a){var b=a.clientX-j,c=a.clientY-i,d=f.width(),e=f.height();b=Math.round(100*b/d),c=Math.round(100*c/e),k.plot([b,c]),h=h+"l"+b+"x"+c,k.updateDb()},removePoint:function(a){var b=a.target,c=$(b).data("coord");h=h.replace("l"+c,""),k.updateDb(),$(b).remove()},plot:function(a){$(".points").append('<div class="pt pt_del" data-coord="'+a.join("x")+'" style="left:'+a[0]+"%;top:"+a[1]+'%"></div>')},update:function(){g=$(".map_zone .point")},updateDb:function(){$.post(window.location.href.replace("edit_","update_").replace("?","")+h)}};k.init()}if($(".sugestao").length){if($(".tab_minha_sugestao").length){var l={userPoints:data.usr,init:function(){$(".point",".map_zone .spots").bind("click",function(){$(this).hasClass("selected")?l.unselectSpot(this):l.selectSpot(this)}),$(".point",".points").bind("click",l.choosePoint),$(".info .create_my_map").bind("click",l.myMap.create),$(".info .finish_my_map").bind("click",l.myMap.finish),$(".info .edit_my_map").bind("click",l.myMap.edit),$(".info .publish_my_map").bind("click",l.myMap.publish)},selectSpot:function(a){if(!$(".tab_minha_sugestao").hasClass("finished")){$(".point",".map_zone .spots").removeClass("selected"),$(a).addClass("selected");var b=a.id.length?a.id.replace("pt_",""):null;l.selectPoint(b),l.selectInfo(b)}},unselectSpot:function(a){$(a).removeClass("selected"),l.unselectPoint(),l.unselectInfo()},selectPoint:function(a){$(".points").removeClass("disabled").addClass("enabled").find(".point").removeClass("selected"),a&&$(".points #point_"+a).addClass("selected")},unselectPoint:function(){$(".points").removeClass("enabled").addClass("disabled").find(".point").removeClass("selected")},selectInfo:function(a){$(".point",".info").removeClass(),a?($(".point_info",".info").html($(".point_wrapper_"+a).html()),$(".tab_minha_sugestao .point_info").show()):$(".tab_minha_sugestao .point_info").hide()},unselectInfo:function(){$(".tab_minha_sugestao .point_info").hide()},choosePoint:function(){if(!$(".points").hasClass("disabled enabled")){var a=this.id.replace("point_",""),b=$(".point.selected",".map_zone .spots"),c=b.data("index");l.userPoints[c]=a,console.log(c);var d=b[0].id;b.attr("id","pt_"+a).removeClass(d).addClass("pt_"+a),l.selectPoint(a),l.selectInfo(a),$.post(window.location.href.replace("sugestao/minha_sugestao","user_points")+l.userPoints.join("l")),console.log(window.location.href.replace("sugestao/minha_sugestao","user_points")+l.userPoints.join("l"))}},myMap:{create:function(){},finish:function(){$(".point.selected").removeClass("selected"),$(".tab_minha_sugestao").removeClass("editing").addClass("finished")},edit:function(){$(".tab_minha_sugestao").removeClass("finished").addClass("editing")},publish:function(){console.log("PUBLISH DUDE")}}};l.init()}if($(".tab_geral").length){var l={posts:data.posts,init:function(){}};l.init()}}});
//# sourceMappingURL=main.min.map